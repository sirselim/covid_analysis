<!DOCTYPE html>
<html>
  <head>
    <title>Exploring NZ COVID19 data</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
      <!-- css -->
      <link rel="stylesheet" type="text/css" href="www/main_stylesheet.css" />
      <!-- js, fonts and vega-lite -->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
      <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
      <link href='https://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>
      <!-- Import Vega & Vega-Lite (does not have to be from CDN) -->
      <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
      <script src="https://cdn.jsdelivr.net/npm/vega-lite@4"></script>
      <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
      <link rel="stylesheet" type="text/css" href="vega-embed.css">
  </head>
  <body>
    
<div id="wrapper">

<p>
  <div id="date">
    <p class="decorated"><span>
        <script>document.write(new Date().toDateString());</script></span>
    </p>
  </div>
</p>

<h1>Exploration of NZ COVID19 cases</h1>
<div style="text-align:center">See code at <a href="https://github.com/sirselim/covid_analysis">https://github.com/sirselim/covid_analysis</a></div>
<div style="text-align:center">All data has been pulled from the NZ Ministry of Health COVID19 website: <a href="https://www.health.govt.nz/our-work/diseases-and-conditions/covid-19-novel-coronavirus/covid-19-current-situation/covid-19-current-cases/covid-19-current-cases-details#probable">[link]</a></div>

<hr>
  <center>
    Total Cases <span style="font-size:16px" class="badge badge-total"><b id="total"></b></span> &nbsp;&nbsp; |
    &nbsp;&nbsp;
    Confirmed <span style="font-size:16px" class="badge badge-confirmed"><b id="confirmed"></b></span> &nbsp;&nbsp; |
    &nbsp;&nbsp;
    Probable <span style="font-size:16px" class="badge badge-probable"><b id="probable"></b></span> &nbsp;&nbsp; |
    &nbsp;&nbsp;
    Recovered <span style="font-size:16px" class="badge badge-recovered"><b id="recovered"></b></span> &nbsp;&nbsp; |
    &nbsp;&nbsp;
    Hospital <span style="font-size:16px" class="badge badge-hospital"><b id="hospital"></b></span> &nbsp;&nbsp; |
    &nbsp;&nbsp;
    Deaths <span style="font-size:16px" class="badge badge-deaths"><b id="deaths"></b></span> <span
      style="font-size:12px">  <br> [ <b> last updated: 2020/05/08 13:39:44
  </b>]</span>
    </center>
<hr>
<div class="container">
    
  <ul class="nav nav-pills nav-justified">
    <li class="active"><a data-toggle="pill" href="#info">Information</a></li>
    <li><a data-toggle="pill" href="#overview">Overview</a></li>
    <li><a data-toggle="pill" href="#allcases">All Cases</a></li>
    <li><a data-toggle="pill" href="#sex">Sex</a></li>
    <li><a data-toggle="pill" href="#dhb">DHB</a></li>
    <li><a data-toggle="pill" href="#agegroup">Age Group</a></li>
    <li><a data-toggle="pill" href="#testing">Testing</a></li>
    <li><a data-toggle="pill" href="#overlay">Overlay</a></li>
  </ul>
    
<div class="tab-content">

  <!-- Information Page ------------------------------------------------------------------------------------------ -->
<div id="info" class="tab-pane fade in active">
  <h3><b>Please read this first</b></h3>

  <p>
    <b>This is by no means an endorsed or official product or analysis. It is merely an interest project with the goal of creating visualisations that could hopefully be useful to others.</b>
  </p>
  <p>
    <b>NOTE:</b> the data reported here differs from the 'statistics' released daily by the NZ Government/MoH. 
    The daily announcement reports all positive tests in the last 24hrs. Here the data are presented based on the calendar date of the positive test result, i.e. all positive tests that occur on a given day 12am-12pm.
    <i>The data contained on this page is made freely available by the New Zealand Ministry of Health (<a
      href="https://www.health.govt.nz/our-work/diseases-and-conditions/covid-19-novel-coronavirus/covid-19-current-situation/covid-19-current-cases/covid-19-current-cases-details#probable">here</a>). See <a href="https://www.health.govt.nz/our-work/diseases-and-conditions/covid-19-novel-coronavirus/covid-19-current-situation/covid-19-current-cases">here</a> for more detail.</i>
  </p>
  <hr>
  <center><span style="font-size:13px">New Zealand went into lockdown on the <b>25<sup>th</sup> March, 2020</b> - indicated in <span style="color: orange"><b>orange</b></span> below.</span></center>
  <div id="vis5" style="text-align:center"></div>
  <hr>
  <center><p>If interested feel free to view the under construction 'dashboard' version of this site <a href="testing.html" target="blank">[here]</a>.</center>
</div>

<!-- Overview Page ------------------------------------------------------------------------------------------ -->
<div id="overview" class="tab-pane fade in active">
    <h3>Overview of total confirmed COVID cases in New Zealand</h3>
    <br>
    <center><span style="font-size:13px">New Zealand went into lockdown on the <b>25<sup>th</sup> March, 2020</b> -
        indicated in <span style="color: orange"><b>orange</b></span> below.</span></center>
    <!-- Container for the visualization -->
    <div id="vis1" style="text-align:center"></div>
</div>

<!-- All cases Page ------------------------------------------------------------------------------------------ -->
<div id="allcases" class="tab-pane fade in active">
  <h3>Overview of all confirmed and probable COVID cases in New Zealand</h3>
  <br>
  <center><span style="font-size:13px">New Zealand went into lockdown on the <b>25<sup>th</sup> March, 2020</b></span></center>
  <!-- Container for the visualization -->
  <div id="vis6" style="text-align:center"></div>
</div>

<!-- Sex Page ------------------------------------------------------------------------------------------ -->
<div id="sex" class="tab-pane fade in active">
  <h3>Overview broken down by Sex of all confirmed cases</h3>
  <br>
  <!-- Container for the visualization -->
  <div id="vis2" style="text-align:center"></div>
</div>

<!-- DHB Page ------------------------------------------------------------------------------------------ -->
<div id="dhb" class="tab-pane fade in active">
  <h3>Overview broken down by DHB location of all confirmed cases</h3>
  <br>
  <!-- Container for the visualization -->
  <div id="vis3" style="text-align:center"></div>
</div>

<!-- Age group Page ------------------------------------------------------------------------------------------ -->
<div id="agegroup" class="tab-pane fade in active">
  <h3>Overview broken down by Age Group of all confirmed cases</h3>
  <br>
  <!-- Container for the visualization -->
  <div id="vis4" style="text-align:center"></div>
</div>

<!-- Testing Page ------------------------------------------------------------------------------------------ -->
<div id="testing" class="tab-pane fade in active">
  <h3>Overview broken down by DHB location of all confirmed cases</h3>
  <br>
  <!-- Container for the visualization -->
  <div id="vis7" style="text-align:center"></div>
</div>

<!-- Overlay Page ------------------------------------------------------------------------------------------ -->
<div id="overlay" class="tab-pane fade in active">
  <h3>Overlay of lab testing numbers and all confirmed cases</h3>
  <br>
  <!-- Container for the visualization -->
  <div id="vis8" style="text-align:center"></div>
</div>

<!-- end of tabbed sections  -->
</div>

</div>

<footer>
  <center>
    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/25/Open_Access_logo_PLoS_white.svg/153px-Open_Access_logo_PLoS_white.svg.png"
      alt="OA" height="24" width="15" hspace="5"><small>Open Access (2020) - <a href="https://github.com/sirselim/covid_analysis">sirselim</a></small>
  </center>
</footer>

</div>

</body>
</html>

<!-- scripts below -->
<!-- js to create an array of scraped summary stats and populate the html -->
<script>
var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange = function() {
  if (this.readyState == 4 && this.status == 200) {
    var myArr = JSON.parse(this.responseText);
    document.getElementById("total").innerHTML = myArr[2];
    document.getElementById("confirmed").innerHTML = myArr[0];
    document.getElementById("probable").innerHTML = myArr[1];
    document.getElementById("recovered").innerHTML = myArr[4];
    document.getElementById("hospital").innerHTML = myArr[3];
    document.getElementById("deaths").innerHTML = myArr[5];
  }
};
xmlhttp.open("GET", "https://raw.githubusercontent.com/sirselim/covid_analysis/master/data/dailySummaryStats.txt", true);
xmlhttp.send();
</script>

<!-- vega-lite scripts -->
<!-- plot the breakdown of cases per day and per DHB -->
<script type="text/javascript">
  var spec =
    "https://raw.githubusercontent.com/sirselim/covid_analysis/master/plotting_scripts/cases_dhb_summary.vl.json";
  vegaEmbed("#vis1", spec)
    .then(function (result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    })
    .catch(console.error);
</script>

<!-- plot the breakdown of cases per day and DHB by Sex -->
<script type="text/javascript">
  var spec =
    "https://raw.githubusercontent.com/sirselim/covid_analysis/master/plotting_scripts/sex_dhb_plotting.vl.json";
  vegaEmbed("#vis2", spec)
    .then(function (result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    })
    .catch(console.error);
</script>

<!-- plot the breakdown of cases per day by DHB -->
<script type="text/javascript">
  var spec =
    "https://raw.githubusercontent.com/sirselim/covid_analysis/master/plotting_scripts/DHB_layered_heatmap.vl.json";
  vegaEmbed("#vis3", spec)
    .then(function (result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    })
    .catch(console.error);
</script>

<!-- plot the breakdown of cases per day by Age group -->
<script type="text/javascript">
  var spec =
    "https://raw.githubusercontent.com/sirselim/covid_analysis/master/plotting_scripts/AgeGroup_layered_heatmap.vl.json";
  vegaEmbed("#vis4", spec)
    .then(function (result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    })
    .catch(console.error);
</script>

<!-- plot the cumulative total COVID cases for NZ -->
<script type="text/javascript">
  var spec =
    "https://raw.githubusercontent.com/sirselim/covid_analysis/master/plotting_scripts/total_cumulative_plotting.vl.json";
  var opt = { "width": 750, "height": 200, "padding": 6 };
  vegaEmbed("#vis5", spec, opt)
    .then(function (result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    })
    .catch(console.error);
</script>

<!-- plot both confirmed and probable COVID cases for NZ -->
<script type="text/javascript">
  var spec =
    "https://raw.githubusercontent.com/sirselim/covid_analysis/master/plotting_scripts/TotalCases_lockdown_noSize.vl.json";
  var opt = { "width": 750, "height": 200, "padding": 6 };
  vegaEmbed("#vis6", spec, opt)
    .then(function (result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    })
    .catch(console.error);
</script>

<!-- plot testing stats for COVID NZ -->
<script type="text/javascript">
  var spec =
    "https://raw.githubusercontent.com/sirselim/covid_analysis/master/plotting_scripts/cumulative_total_testing.vl.json";
  var opt = { "width": 750, "height": 200, "padding": 6 };
  vegaEmbed("#vis7", spec, opt)
    .then(function (result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    })
    .catch(console.error);
</script>

<!-- plot overlay stats for COVID NZ -->
<script type="text/javascript">
  var spec =
    "https://raw.githubusercontent.com/sirselim/covid_analysis/master/plotting_scripts/multi-data_plotting.vl.json";
  var opt = { "width": 750, "height": 250, "padding": 6 };
  vegaEmbed("#vis8", spec, opt)
    .then(function (result) {
      // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
    })
    .catch(console.error);
</script>